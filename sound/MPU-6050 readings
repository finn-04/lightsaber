#include <Wire.h>
#include <MPU6050.h>

MPU6050 mpu;

const int speakerPin = 9;  

void setup() {
  Serial.begin(9600);
  Wire.begin();
  mpu.initialize();

  if (!mpu.testConnection()) {
    Serial.println("MPU6050 connection failed!");
    while (1);
  }
  Serial.println("MPU6050 initialized successfully.");

  pinMode(speakerPin, OUTPUT);  // Set the speaker pin as an output
}

void loop() {
  int16_t ax, ay, az;

  // Get accelerometer values
  mpu.getAcceleration(&ax, &ay, &az);

  // Map the X-axis acceleration value to a frequency range (just an example)
  int frequency = map(ax, -17000, 17000, 200, 1000);  // Map ax to a frequency range between 200 Hz and 1000 Hz

  // Ensure the frequency stays within the range
  frequency = constrain(frequency, 200, 1000);

  // Output the tone to the speaker
  tone(speakerPin, frequency);

  // Print values to monitor changes in Serial Monitor
  Serial.print("Accel X: ");
  Serial.print(ax);
  Serial.print(" | Frequency: ");
  Serial.println(frequency);

  delay(50); 
}
